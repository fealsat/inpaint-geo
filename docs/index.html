<!doctypehtml><html lang=en><meta charset=utf-8><title>Automatic occlusion removal from 3D maps for maritime situational awareness</title><meta charset=utf-8><meta name=description content="Automatic occlusion removal project page"><meta content=width=device-width,initial-scale=1 name=viewport><link rel="shortcut icon" type="image/x-icon" href="favicon.ico"><link href=/inpaint-geo/static/w3style.css rel=stylesheet><link href=/inpaint-geo/static/style.css rel=stylesheet><link href=https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap rel=stylesheet><link href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet><style>body{font-family:Roboto,sans-serif;font-size:1.2em;font-weight:300}a{color:#4682b4}h1{font-family:Roboto,sans-serif;font-size:3em;font-weight:700}.bgimg-1{background-position:50%;background-size:cover;min-height:100%}.text-highlight{font-size:1.1em;font-weight:400}</style><body><div class=w3-top><div class="w3-bar w3-blue-gray w3-card w3-left-align w3-large"><a class="w3-bar-item w3-button w3-hide-medium w3-hide-large w3-right w3-padding-large w3-hover-white w3-large w3-blue-gray"title="Toggle Navigation Menu"href=javascript:void(0); onclick=toggleNavigation()><i class="fa fa-bars"></i></a><a class="w3-bar-item w3-button w3-padding-large w3-white"href=# id=home_link>Home</a><a class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white"href=https://arxiv.org/abs/2409.03451v1 id=paper_link>Paper</a><a class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white"href=https://github.com/fealsat/inpaint-geo id=code_link>Code</a></div><div class="w3-bar-block w3-white w3-hide w3-hide-large w3-hide-medium w3-large"id=navDemo><a class="w3-bar-item w3-button w3-padding-large"href=https://arxiv.org/abs/2409.03451v1 id=paper_link>Paper</a><a class="w3-bar-item w3-button w3-padding-large"href=https://github.com/fealsat/inpaint-geo id=code_link>Code</a></div></div><div class="w3-row-padding w3-padding-64 w3-container"id=header-grid><div class=w3-content style=justify-content:center;display:flex><div class="w3-justify w3-full"><h1 class=w3-center id=page-title>Automatic occlusion removal from 3D maps for maritime situational awareness</h1><p class="w3-center text-highlight"id=pAuthors><a href=https://scholar.google.com/citations?user=2KBrb7oAAAAJ>Felix Sattler</a><sup>1</sup>, Borja Carrillo Perez<sup>1</sup>, Maurice Stephan<sup>1</sup>, Sarah Barnes<sup>1</sup><p class="w3-center text-highlight"id=pAffiliations>1) <a href=https://www.dlr.de>German Aerospace Center (DLR e.V.)</a></div></div></div><div id=content><div class="w3-row-padding w3-padding-16 w3-container"id=abstract-grid><div class=w3-content style=justify-content:center;display:flex><div class="w3-justify w3-twothird"><h2 class=w3-center>Abstract</h2><p>We introduce a novel method for updating 3D geospatial models, specifically targeting occlusion removal in large-scale maritime environments. Traditional 3D reconstruction techniques often face problems with dynamic objects, like cars or vessels, that obscure the true environment, leading to inaccurate models or requiring extensive manual editing. Our approach leverages deep learning techniques, including instance segmentation and generative inpainting, to directly modify both the texture and geometry of 3D meshes without the need for costly reprocessing. By selectively targeting occluding objects and preserving static elements, the method enhances both geometric and visual accuracy. This approach not only preserves structural and textural details of map data but also maintains compatibility with current geospatial standards, ensuring robust performance across diverse datasets. The results demonstrate significant improvements in 3D model fidelity, making this method highly applicable for maritime situational awareness and the dynamic display of auxiliary information.</div></div></div><div class="w3-row-padding w3-padding-16 w3-container"id=content-grid><div class=w3-content><div class=w3-justify><h2 id=content-title>Proposed method</h2><div class=image-plain><figure><img alt="Proposed pipeline"id=img-plain-im src=/inpaint-geo/static/pipeline.png><figcaption id=img-plain-caption></figcaption></figure></div><p>Our method for updating 3D geospatial models combines mask-aware inpainting and geometric remeshing, optimized for aerial imagery. First, we set up an orthographic camera in a bird's eye view above the 3D map to avoid distortions. Then a color (RGB) image and a 16-bit height map of the 3D mesh is rendered. The pipeline operates in tiles, processing overlapping image patches to handle large-scale maps efficiently. Next, instance segmentation identifies occluded or outdated areas in the 3D model. This stage is agnostic to any instance segmentation method that outputs masks. For our experiments we filter detections based on classes specific to the maritime domain, such as ships and vehicles. Predicted 2D masks guide two passes of inpainting, one on color and one on position data. Inpainting is also agnostic to methods. See below for an evaluation of different methods. After processing, we perform geometric remeshing and color reprojection. Remeshing projects the 3D vertices into the BEV reference frame and updates elevation values with inpainted data, ensuring the geometry conforms to the background curvature. Vertices are merged to clean up the projected geometry, and color data is reprojected and rasterized into a new surface texture.</div></div></div><div class="w3-row-padding w3-padding-16 w3-container"id=content-grid><div class=w3-content><div class=w3-justify><h2 id=content-title>Interactive 3D example</h2><div id=custom-3d><div id=scene-3d-gui style=position:absolute></div></div><p>In this interactive 3D example, you can see how two patches of our dataset look before and after inpainting. When pressing <em>toggle inpainting</em> the processed patch is displayed. You can also check out the wireframe to see the remeshing in action. Both models are loaded as <a href=https://www.khronos.org/glTF>GLTF</a> models as is standard with <a href=https://docs.ogc.org/cs/22-025r4/22-025r4.html#toc24>3DTiles</a>. Please note that the data is not cleaned but taken directly from the source dataset.</div></div></div><div class="w3-row-padding w3-padding-16 w3-container"id=content-grid><div class=w3-content><div class=w3-justify><h2 id=content-title>Steps of pipeline</h2><div class=image-gallery><div class=image-gallery-item><figure><img alt="Source mesh"class=img-gallery-im src=/inpaint-geo/static/source.jpg> a) source mesh</figure></div><div class=image-gallery-item><figure><img alt="Reprojected mesh"class=img-gallery-im src=/inpaint-geo/static/reprojected.jpg> b) geometry after projecting inpainted position causing many overlapping vertices.</figure></div><div class=image-gallery-item><figure><img alt="Remeshed mesh"class=img-gallery-im src=/inpaint-geo/static/remeshed.jpg> c) geometry after remeshing. The ship is still vaguely visible but the mesh is consistent again.</figure></div><div class=image-gallery-item><figure><img alt="Processed mesh"class=img-gallery-im src=/inpaint-geo/static/processed.jpg> d) final mesh with inpainted surface texture after processing.</figure></div></div><p>(click to enlarge) Examples of each stage of the pipeline using our verification dataset. a) Shows the source mesh before processing. b) shows the geometry after projecting inpainted position data from the orthoginal bird's eye view. This results in many overlapping vertices and cluttered geometry. c) shows the geometry geometry after remeshing using a merge-by-distance operation. There are still remnants of the original objects visible but the mesh is consistent again. d) shows the final processed patches after the texture has been rasterized to the new geometry and is ready for web display (see above).</div></div></div><div class="w3-row-padding w3-padding-16 w3-container"id=content-grid><div class=w3-content><div class=w3-justify><h2 id=content-title>Interactive before / after comparison</h2><div class=img-comp-wrapper><div class=img-comp-container id=img-comp-1-container><div class=img-comp-img id=img-comp-1><img alt=Before height=1024 src=/inpaint-geo/static/before.jpg width=1024></div><div class="img-comp-img img-comp-overlay"id=img-comp-2><img alt=After height=1024 src=/inpaint-geo/static/after.jpg width=1024></div></div></div><p>Drag the slider to see a before and after comparison. Notice how the geometry and structural details remain intact. Sometimes shadow artifacts are preset, when the dilated mask is too narrow and the inpainting method continues the shadow. This could likely be improved by fine-tuning the network on aerial datasets or including the shadow as part of the detected object as proposed by <a href=https://openaccess.thecvf.com/content_CVPR_2020/papers/Wang_Instance_Shadow_Detection_CVPR_2020_paper.pdf>Wang et al., 2020</a>.</div></div></div><div class="w3-row-padding w3-padding-16 w3-container"id=content-grid><div class=w3-content><div class=w3-justify><h2 id=content-title>Comparing inpainting methods</h2><div class=image-plain><figure><img alt="Inpainting comparison"id=img-plain-im src=/inpaint-geo/static/collage_inpainting_techniques.jpg><figcaption id=img-plain-caption></figcaption></figure></div><p>Qualitative comparison of inpainting methods on color and position maps: (a) Source bird's eye view rendered from the 3D map using an orthogonal camera. (e) Merged and dilated mask from instance segmentation. Tested methods: (b & f) <a href=https://github.com/zsyzzsoft/co-mod-gan>CoModGAN</a>, (c, g) <a href=https://github.com/fenglinglwb/MAT>MAT</a>, (d, h) <a href=https://advimman.github.io/lama-project/>LaMa</a>. Note how <em>CoModGAN</em> performs comparable to <em>LaMa</em> for position data (f & h), while <em>MAT</em> fails to remove the ship (g). For color data <em>LaMa</em> outperforms both <em>MAT</em> and <em>CoModGAN</em> leaving only a few shadow artifacts (see cars in the lower right). For quantitative analysis, refer to the full paper.</div></div></div><div class="w3-row-padding w3-padding-16 w3-container"id=content-grid><div class=w3-content><div class=w3-justify><h2 id=content-title>Citation</h2><div class=citation-container><div class=citation-content id=citation><p>@article{sattleretal2024,<br> title={Automatic occlusion removal from 3D maps for maritime situational awareness}, <br> author={Felix Sattler and Borja Carrillo Perez and Maurice Stephan and Sarah Barnes},<br> journal={arXiv preprint arXiv:2409.03451},<br> url={https://arxiv.org/abs/2409.03451},<br> year={2024},<br> }</div><button class=copy-button onclick=copyCitation()>Copy</button></div><p class=w3-text-dark-gray id=content-text></div></div></div></div><div class="w3-container w3-black w3-center w3-opacity w3-padding-64"><div class=w3-hover-opacity id=div_url_dlr style=justify-content:center;align-items:flex-end;display:flex><img class=w3-margin-right src=/inpaint-geo/static/dlr_logo_white.svg><div class=logo-title style=flex-direction:column;font-family:Roboto,sans-serif;font-size:1.1em;font-style:normal;font-weight:700;display:flex><div class=logo-textline-1>Institute for the Protection</div><div class=logo-textline-2>of Maritime Infrastructures</div></div></div></div><footer class="w3-container w3-padding-64 w3-center w3-opacity"><p>Copyright © 2024, Powered by <a href=https://www.w3schools.com/w3css/default.asp target=_blank>w3.css</a></footer><script id=script-body>var toggleNavigation=(()=>{let b=` w3-show`;const a=document.getElementById(`navDemo`);a.className=a.className.indexOf(`w3-show`)===-1?a.className+ b:a.className.replace(b,``)});const divToDLR=document.getElementById(`div_url_dlr`);divToDLR.addEventListener(`mouseover`,a=>{a.target.style.cursor=`pointer`});divToDLR.addEventListener(`click`,a=>{window.open(`https://www.dlr.de/en/mi`,`_blank`)});const divToPaper=document.getElementById(`header_link`);divToPaper.addEventListener(`mouseover`,a=>{a.target.style.cursor=`pointer`});divToPaper.addEventListener(`click`,a=>{window.open(`https://arxiv.org/abs/2409.03451v1`,`_blank`)})</script><script id=image-gallery-script>document.addEventListener(`DOMContentLoaded`,(()=>{let i=`click`,j=1;const a=document.querySelectorAll(`.img-gallery-im`);const b=document.createElement(`div`);b.classList.add(`modal`);b.innerHTML=`
        <span class="modal-close">&times;</span>
        <img class="modal-content">
        <div class="arrow left">&#10094;</div>
        <div class="arrow right">&#10095;</div>
    `;document.body.appendChild(b);const c=b.querySelector(`.modal-content`);const d=b.querySelector(`.modal-close`);const e=b.querySelector(`.arrow.left`);const f=b.querySelector(`.arrow.right`);let g=0;const h=d=>{const e=a[d];b.style.display=`flex`;c.src=e.src;g=d};b.addEventListener(i,a=>{if(a.target===b||a.target===d){b.style.display=`none`}});e.addEventListener(i,()=>{g=(g- j+ a.length)%a.length;h(g)});f.addEventListener(i,()=>{g=(g+ j)%a.length;h(g)});a.forEach((a,b)=>{a.addEventListener(i,()=>h(b))})}))</script><script id=img-comp-script>class WidgetComparison{constructor(){this.x=document.getElementsByClassName(`img-comp-overlay`);for(let a=0;a<this.x.length;a++){this.compareImages(this.x[a])}}compareImages(a){let i=0,m=`class`,k=`px`,j=2,l=`DIV`,n=`-18px`;const b=a=>{a.preventDefault();f=1;window.addEventListener(`mousemove`,c);window.addEventListener(`touchmove`,c)};const c=b=>{const c=a.offsetWidth;const e=a.offsetHeight;if(f===i)return !1;const g=b=>{let c,d=i;b=b.changedTouches?b.changedTouches[i]:b;c=a.parentElement.getBoundingClientRect();d=b.pageX- c.left;d=d- window.pageXOffset;return d};let h=g(b);if(h<i)h=i;if(h>c)h=c;a.style.clip=`rect(0px, ${h}px, auto, 0px)`;d.style.left=h- d.offsetWidth/j+ k};let d,e,f=i,g,h;g=a.offsetWidth;h=a.offsetHeight;e=document.getElementById(`img-comp-1-container`);e.style.height=h+ k;d=document.createElement(l);d.setAttribute(m,`img-comp-slider`);d.appendChild(document.createElement(l));d.children[i].setAttribute(m,`img-comp-slider-knob`);a.style.clip=`rect(0px, ${g/j}px, auto, 0px)`;a.parentElement.insertBefore(d,a);d.style.left=g/j- d.offsetWidth/j+ k;d.style.height=h+ k;d.children[i].style.top=h/j- d.children[i].offsetHeight/j+ k;d.children[i].style.left=n;d.addEventListener(`mousedown`,b);window.addEventListener(`mouseup`,a=>{f=i});d.addEventListener(`touchstart`,b);window.addEventListener(`touchend`,a=>{f=i});window.addEventListener(`resize`,b=>{const c=a.offsetWidth;const f=a.offsetHeight;d.style.left=c/j- d.offsetWidth/j+ k;d.style.height=f+ k;d.children[i].style.top=f/j- d.children[i].offsetHeight/j+ k;d.children[i].style.left=n;e.style.height=f+ k;a.style.clip=`rect(0px, ${c/j}px, auto, 0px)`})}}const widgetComparison=new WidgetComparison()</script><script id=citation-copy-script>var copyCitation=(async()=>{const a=document.getElementById(`citation`);console.log(a);try{await navigator.clipboard.writeText(a.innerText);alert(`Citation copied to clipboard!`)}catch(a){console.error(`Failed to copy: `,a);alert(`Failed to copy citation.`)}})</script><script type=importmap>
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.167.1/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.167.1/examples/jsm/"
      }
    }
</script><script type=module>let l=0,j=80,m=1,n=9,i=`px`,o=16,k=Math;var h=(()=>{g.controls.update();g.renderer.render(g.scene,g.camera);requestAnimationFrame(h)});import*as a from"three";import{OrbitControls as b}from"three/addons/controls/OrbitControls.js";import{GLTFLoader as c}from"three/addons/loaders/GLTFLoader.js";import{DRACOLoader as d}from"three/addons/loaders/DRACOLoader.js";import{GUI as e}from"three/addons/libs/lil-gui.module.min.js";class f{constructor(e){this.stage=document.getElementById(e);let f=this.computeDimensions(this.stage);this.stage.style.height=f.height+ i;this.scene=new a.Scene();this.scene.background=new a.Color(5855577);this.renderer=new a.WebGLRenderer();this.renderer.setPixelRatio(window.devicePixelRatio);this.renderer.setSize(this.stage.offsetWidth,this.stage.offsetHeight);this.renderer.outputEncoding=a.sRGBEncoding;this.camera=new a.PerspectiveCamera(45,f.aspect,0.1,1000);this.camera.position.x=j;this.camera.position.y=j;this.camera.position.z=j;this.controls=new b(this.camera,this.renderer.domElement);this.controls.minDistance=50;this.controls.maxDistance=150;this.controls.maxPolarAngle=k.PI/2- 0.2;this.wire_material=new a.MeshBasicMaterial({color:13421772,wireframe:!0});this.patches=[];this.active=[];this.is_wireframe=!1;this.stage.appendChild(this.renderer.domElement);this.controls.update();window.addEventListener(`resize`,()=>{f=this.computeDimensions(this.stage);this.camera.aspect=f.aspect;this.camera.updateProjectionMatrix();this.stage.style.height=f.height+ i;this.renderer.setSize(this.stage.offsetWidth,this.stage.offsetHeight)});let g=this;const h=new d();h.setDecoderPath(`https://cdn.jsdelivr.net/npm/three@0.167.1/examples/jsm/libs/draco/`);const n=new c().setPath(`/inpaint-geo/static/`);n.setDRACOLoader(h);n.load(`patch_pre_comp_draco.glb`,(a=>{g.patches[l]=a.scene;g.scene.add(g.patches[l]);g.active=g.patches[l];n.load(`patch_post_comp_draco.glb`,(a=>{g.patches[m]=a.scene;g.patches[m].visible=!1;g.scene.add(g.patches[m])}))}))}createPanel(){const a=new e({width:310,container:document.getElementById(`scene-3d-gui`)});const b=a.addFolder(`Mesh`);this.settings={'show wireframe':!1,'toggle inpainting':!1};let c=this;const d=a=>{c.active.traverse(b=>{if(b.material){if(!b.material_alt){b.material_alt=b.material};b.material=a?this.wire_material:b.material_alt;c.is_wireframe=a}})};b.add(this.settings,`show wireframe`).onChange(d);b.add(this.settings,`toggle inpainting`).onChange(a=>{if(a){c.patches[l].visible=!1;c.patches[m].visible=!0;c.active=c.patches[m]}else{c.patches[l].visible=!0;c.patches[m].visible=!1;c.active=c.patches[l]};d(c.is_wireframe)})}computeDimensions(a){console.log(a.offsetWidth);const b=a.offsetWidth<600?n/o:o/n;const c=k.min(a.offsetWidth/b,window.innerHeight);const d=a.offsetWidth/c;return {"height":c,"aspect":d}}}const g=new f(`custom-3d`);g.createPanel();h()</script>
